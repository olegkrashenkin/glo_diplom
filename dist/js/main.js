/*! For license information please see main.js.LICENSE.txt */
(()=>{"use strict";const e=({timing:e,draw:t,duration:n})=>{let o=performance.now();requestAnimationFrame((function a(l){let c=(l-o)/n;c>1&&(c=1);let r=e(c);t(r),c<1&&requestAnimationFrame(a)}))},t=document.querySelector(".overlay"),n=200,o=({modal:t,overlay:o,isShow:a=!0,isDocument:l=!1})=>{e(a?{duration:n,timing:e=>e,draw(e){t.style.top=l?-50*(1-e)+"%":50*e+"%",o.style.opacity=e,t.style.opacity=e}}:{duration:n,timing:e=>e,draw(e){t.style.top=l?-50*e+"%":50*(1-e)+"%",o.style.opacity=1-e,t.style.opacity=1-e}})},a=e=>{o({modal:e,overlay:t,isShow:!1}),setTimeout((()=>{t.style.display="none",e.style.display="none"}),n)},l=(e,n,l)=>{const c=document.querySelectorAll(e),r=document.querySelector(n);t.style.opacity="0",r.style.opacity="0",c.forEach((e=>{e.addEventListener("click",(e=>{e.preventDefault(),t.style.display="block",r.style.display="block",o({modal:r,overlay:t})}))})),r.addEventListener("click",(e=>{e.target.closest(l)&&a(r)}))};let c,r,s;l(".button>a",".header-modal",".header-modal__close"),l(".service-button>a",".services-modal",".services-modal__close"),(e=>{let a;document.querySelectorAll(".sertificate-document").forEach((e=>{e.classList.add("document-inner"),e.addEventListener("click",(e=>{e.preventDefault();const l=()=>{o({modal:a,overlay:t,isShow:!1,isDocument:!0}),setTimeout((()=>{t.style.display="none",a.remove()}),n),t.removeEventListener("click",l)};a=document.createElement("div"),a.style.cssText=`\n                background-image: url('${e.target.parentNode.pathname}');\n                background-position: center;\n                background-repeat: no-repeat;\n                background-size: contain;\n                position: relative;\n                margin: auto;\n                max-width: 68vh;\n                height: 100%;\n                opacity: 0\n            `,t.append(a),a=t.querySelector("div"),t.style.display="block",o({modal:a,overlay:t,isDocument:!0}),t.addEventListener("click",l)}))}))})(),(e=>{const t=document.querySelector(".smooth-scroll");t.style.visibility="hidden",t.style.cursor="pointer",document.addEventListener("scroll",(()=>{const e=document.documentElement.scrollTop;e>700?(t.style.opacity=e/1e4*4+"",t.style.visibility="visible"):t.style.visibility="hidden"})),t.addEventListener("click",(()=>{document.body.scrollIntoView({behavior:"smooth",block:"start"})}))})(),(e=>{const t=document.querySelectorAll(".count_1>span"),n=document.querySelectorAll(".count_2>span"),o=document.querySelectorAll(".count_3>span"),a=document.querySelectorAll(".count_4>span"),l=()=>{const e=(()=>{const e=(new Date("20 january 2023").getTime()-(new Date).getTime())/1e3;return{timeRemaning:e,days:Math.floor(e/60/60/24),hours:Math.floor(e/60/60%24),minutes:Math.floor(e/60%60),seconds:Math.floor(e%60)}})(),c=(e,t,n=!1)=>{n?e.forEach((e=>{e.textContent="00"})):e.forEach((e=>{e.textContent=`0${t}`.slice(-2)}))};e.timeRemaning>0?(c(t,e.days),c(n,e.hours),c(o,e.minutes),c(a,e.seconds)):(c(t,e.days,!0),c(n,e.hours,!0),c(o,e.minutes,!0),c(a,e.seconds,!0),clearInterval(l))};l(),setInterval(l,1e3)})(),document.body.classList.contains("balkony")&&(()=>{const t=document.getElementById("calc"),n=document.getElementById("calc-type"),o=document.getElementById("calc-type-material"),a=document.getElementById("calc-input"),l=document.getElementById("calc-total");t.addEventListener("input",(t=>{var c;"calc-input"===t.target.id&&((c=t).target.value=c.target.value.replace(/\D+/g,"")),(()=>{const t=+n.options[n.selectedIndex].value,c=+o.options[o.selectedIndex].value,r=+a.value;if(t&&c&&r){const n=t*c*r;e({duration:200,timing:e=>e,draw(e){l.value=Math.round(e*n)}})}})()}))})(),(()=>{let e,t;document.querySelectorAll(".rf").forEach((n=>{n.addEventListener("input",(n=>{switch(n.target.name){case"fio":return(o=n).target.value=o.target.value.replace(/[^a-zа-яё]+/gi,""),void(e=o.target.value);case"phone":return void(t=((e,t)=>{let n;return n=t?17:16,e.target.value.length<=n?e.target.value.length>1?e.target.value=e.target.value[0]+e.target.value.substring(1).replace(/[^\d]/,""):e.target.value=e.target.value.replace(/[^\d\+]/,""):e.target.value=e.target.value.substring(0,n),e.target.value})(n,"+"===n.target.value[0]))}var o})),n.addEventListener("click",(o=>{o.preventDefault();const l={name:e,phone:t};if("submit"===o.target.type&&""!=e&&""!=t){const e=document.getElementById("calc-total");c=n.closest(".header-modal, .services-modal"),r=n.querySelectorAll("input"),s=o.target,btnText=o.target.textContent,document.body.classList.contains("balkony")&&e&&""!=e.value&&(l.total=e.value),s.textContent="Загрузка...",(async e=>{const t=()=>{setTimeout((()=>{r.forEach((e=>e.value="")),s.textContent=void 0,c&&a(c)}),2500)};fetch("https://jsonplaceholder.typicode.com/posts",{method:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}).then((e=>{if(e.ok)return s.textContent="Заявка принята!",t(),e.json()})).catch((e=>{s.textContent="Ошибка!",t()}))})(l)}}))}))})()})();